<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <title>Saleaah | Careers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap");
      :root {
        --main-purple: #745ff2;
        --text-dark: #222;
      }
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Cairo", sans-serif;
        background-color: #fff;
        overflow-x: hidden;
      }
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("pattern.png");
        background-repeat: repeat;
        background-size: 180px;
        opacity: 0.08;
        z-index: -1;
      }
      .content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: left;
        padding: 60px 20px;
        max-width: 800px;
        margin: 0 auto;
      }
      .logo {
        width: 260px;
        margin-bottom: 20px;
      }
      h1 {
        color: var(--main-purple);
        text-align: center;
        margin-bottom: 25px;
      }
      h2 {
        color: var(--main-purple);
        margin-top: 25px;
        margin-bottom: 8px;
      }
      ul {
        margin: 0 0 15px 25px;
      }
      form {
        width: 100%;
        margin-top: 25px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      label {
        font-weight: 600;
      }
      input,
      select {
        padding: 8px 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-family: "Cairo", sans-serif;
      }
      button {
        margin-top: 15px;
        background: var(--main-purple);
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
      }
      button:hover {
        background: #624cd8;
      }
      .footer {
        text-align: center;
        padding: 25px 0;
        font-size: 0.9rem;
        color: #666;
        border-top: 1px solid rgba(0, 0, 0, 0.05);
        margin-top: 60px;
      }
      .footer span {
        color: var(--main-purple);
        font-weight: 600;
      }
      .endpage {
        text-align: center;
        padding: 100px 20px;
        display: none;
      }
      .endpage h2 {
        color: var(--main-purple);
        margin-bottom: 10px;
      }
      .endpage p {
        color: #333;
        font-size: 1.1rem;
      }
      .loading {
        display: none;
        text-align: center;
        margin-top: 20px;
      }
      .loading-spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid var(--main-purple);
        border-radius: 50%;
        width: 30px;
        height: 30px;
        animation: spin 2s linear infinite;
        margin: 0 auto 10px;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </head>

  <body>
    <div class="content" id="mainContent">
      <img src="logo.png" class="logo" alt="Saleaah logo" />

      <h1 id="jobTitle">Sales Specialist</h1>

      <h2>Key Responsibilities:</h2>
      <ul>
        <li>
          Building and nurturing strong relationships with our current clients.
        </li>
        <li>
          Strategically expanding our clients' network by identifying and
          securing the best deals.
        </li>
        <li>
          Leading the expansion into new clients aligned with Saleaah's vision.
        </li>
        <li>Coordinating the entire order cycle with clients.</li>
        <li>
          Collaborating closely with the procurement team to ensure smooth
          operations.
        </li>
        <li>
          Leading negotiations on prices and other critical terms with clients.
        </li>
      </ul>

      <h2>Requirements:</h2>
      <ul>
        <li>
          Bachelor's degree in Marketing, Business Administration, or a related
          field.
        </li>
        <li>1–3 years of experience in customer relations or sales.</li>
        <li>
          Strong analytical and problem-solving skills, data-driven
          decision-making.
        </li>
        <li>Excellent communication and interpersonal skills.</li>
        <li>Exceptional organizational skills and meticulous attention.</li>
        <li>Experience in the Poultry Industry.</li>
        <li>Proficiency in MS Excel.</li>
        <li>Fluency in Arabic and English.</li>
        <li>Saudi Nationality – Riyadh-based.</li>
      </ul>

      <form id="jobForm">
        <label>Name</label>
        <input type="text" id="name" name="name" required />

        <label>Email</label>
        <input type="email" id="email" name="email" required />

        <label>Phone Number</label>
        <input type="tel" id="phone" name="phone" required pattern="[0-9]{9,}" />

        <label>Gender</label>
        <select id="gender" name="gender" required>
          <option value="">Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>

        <label>Nationality</label>
        <select id="nationality" name="nationality" required>
          <option value="">Select</option>
          <option value="Saudi">Saudi</option>
          <option value="Others">Others</option>
        </select>

        <label>Are you based in Riyadh?</label>
        <select id="riyadh" name="riyadh" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>

        <label>Do you have a bachelor's degree?</label>
        <select id="degree" name="degree" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>

        <label>Have you worked in the Food & Beverage industry?</label>
        <select id="fnb" name="fnb" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>

        <label>Have you worked in the Poultry industry?</label>
        <select id="poultry" name="poultry" required>
          <option value="">Select</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>

        <label>LinkedIn Profile</label>
        <input type="url" id="linkedin" name="linkedin" required />

        <label>Upload your CV (PDF/DOC)</label>
        <input
          type="file"
          id="cv"
          name="cv"
          accept=".pdf,.doc,.docx"
          required
        />

        <button type="submit" id="submitButton">Submit Application</button>
      </form>
      
      <div class="loading" id="loadingIndicator">
        <div class="loading-spinner"></div>
        <p>Submitting your application...</p>
      </div>
    </div>

    <div class="endpage" id="endPage">
      <h2>Your application has been submitted ✔</h2>
      <p>Thank you for applying. Our team will review your profile and contact you if there is a match.</p>
    </div>

    <footer class="footer">
      © 2025 <span>Saleaah</span> — All rights reserved
    </footer>

    <script>
      // تحديث الرابط إلى تطبيق الويب الخاص بك
      const scriptURL = "https://script.google.com/macros/s/AKfycby-Ez4JnKGZOdJJHauvfhpt0HYlNFFgDtBBQ6LeRQfhriX-1HAxLGRUvx_rgTvIBvxHuw/exec";
      
      const form = document.getElementById("jobForm");
      const mainContent = document.getElementById("mainContent");
      const endPage = document.getElementById("endPage");
      const loadingIndicator = document.getElementById("loadingIndicator");
      const submitButton = document.getElementById("submitButton");
      
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        
        // إظهار مؤشر التحميل وتعطيل زر الإرسال
        submitButton.disabled = true;
        loadingIndicator.style.display = "block";
        
        try {
          // قراءة البيانات من النموذج
          const formData = new FormData(form);
          
          // معالجة ملف السيرة الذاتية
          const fileInput = document.getElementById('cv');
          if (fileInput.files.length > 0) {
            const file = fileInput.files[0];
            
            // تحويل الملف إلى base64
            const fileReader = new FileReader();
            
            // استخدام وعد (Promise) للانتظار حتى يتم قراءة الملف
            const fileContents = await new Promise((resolve, reject) => {
              fileReader.onload = e => resolve(e.target.result);
              fileReader.onerror = e => reject(e);
              fileReader.readAsDataURL(file);
            });
            
            // إنشاء كائن بيانات ليتم إرساله كـ JSON
            const jsonData = {
              name: formData.get('name'),
              email: formData.get('email'),
              phone: formData.get('phone'),
              gender: formData.get('gender'),
              nationality: formData.get('nationality'),
              riyadh: formData.get('riyadh'),
              degree: formData.get('degree'),
              fnb: formData.get('fnb'),
              poultry: formData.get('poultry'),
              linkedin: formData.get('linkedin'),
              cv: fileContents,
              cvFilename: file.name,
              cvMimeType: file.type
            };
            
            console.log("Sending data to Google Apps Script...");
            
            // إرسال البيانات إلى تطبيق الويب
            const response = await fetch(scriptURL, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(jsonData),
            });
            
            console.log("Response received:", response);
            
            if (response.ok) {
              // إظهار صفحة النجاح
              mainContent.style.display = "none";
              endPage.style.display = "block";
            } else {
              // إظهار رسالة خطأ
              const errorData = await response.json();
              alert(`❌ Error: ${errorData.message || "Something went wrong. Please try again."}`);
              
              // إعادة تمكين زر الإرسال وإخفاء مؤشر التحميل
              submitButton.disabled = false;
              loadingIndicator.style.display = "none";
            }
          } else {
            alert("Please select a CV file");
            submitButton.disabled = false;
            loadingIndicator.style.display = "none";
          }
        } catch (err) {
          console.error("Error:", err);
          alert("⚠️ Connection issue or error processing the file. Please try again.");
          
          // إعادة تمكين زر الإرسال وإخفاء مؤشر التحميل
          submitButton.disabled = false;
          loadingIndicator.style.display = "none";
        }
      });
    </script>
  </body>
</html>
